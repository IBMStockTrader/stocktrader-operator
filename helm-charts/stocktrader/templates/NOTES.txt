The IBM Stock Trader application is deployed.

{{- if .Values.trader.enabled }}
The Java web application is available at
  https://<route-url>>/trader
{{- end }}

{{- if .Values.tradr.enabled }}
The Node.js web application is available at
  https://<route-url>>/tradr
{{- end }}

{{- if not .Values.global.opentelemetry.disable }}
OpenTelemetry Configuration:
  Collector Image: {{ include "otel.collector.image" . }}
  {{- if .Values.global.opentelemetry.agent.enabled }}
  Agent Image: {{ include "otel.agent.image" . }}
  {{- end }}
  Environment: {{ .Values.global.environment }}

{{- if and (eq .Values.global.environment "production") (not .Values.global.opentelemetry.collector.image) }}

⚠️  WARNING: SECURITY RISK DETECTED ⚠️
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
You are deploying to a PRODUCTION environment but using the community
OpenTelemetry Collector image (otel/opentelemetry-collector-contrib:latest).

This is NOT a best practice and poses security risks:
  • Community images may not be scanned or approved for production use
  • Using 'latest' tag can lead to unexpected updates and instability
  • No guarantee of support or security patches

RECOMMENDED ACTION:
  Define a specific production image in values.yaml:
    global:
      opentelemetry:
        collector:
          image:
            repository: ghcr.io/ibmstocktrader/opentelemetry-collector-contrib
            tag: <specific-version>

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
{{- end }}
{{- end }}
